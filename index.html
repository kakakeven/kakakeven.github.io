<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.4.2',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="飞翔的花狸猫">
<meta property="og:url" content="http://lintrip.com/index.html">
<meta property="og:site_name" content="飞翔的花狸猫">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="飞翔的花狸猫">






  <link rel="canonical" href="http://lintrip.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>飞翔的花狸猫</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/kakakeven"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">飞翔的花狸猫</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lintrip.com/2018/12/12/python-crash-course-errata/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KevinG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞翔的花狸猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/12/python-crash-course-errata/" itemprop="url">
                  Python 编程入门环境问题解决方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-12-12 20:20:39 / 修改时间：20:39:45" itemprop="dateCreated datePublished" datetime="2018-12-12T20:20:39+08:00">2018-12-12</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://book.douban.com/subject/26829016/" target="_blank" rel="noopener">Python编程:从入门到实践</a>是一本非常优秀的 Python 入门书籍；编排合理，翻译的非常棒；除了基础理论，还有三个实战项目，边看边操作，可以更好学习 Python；</p>
<p>在实际的动手操作中，遇到了几个环境问题，记录如下，希望能对遇到同样问题的同学有所帮助；</p>
<h2 id="1-matplotlab-运行错误"><a href="#1-matplotlab-运行错误" class="headerlink" title="1 matplotlab 运行错误"></a>1 matplotlab 运行错误</h2><h4 id="错误描述"><a href="#错误描述" class="headerlink" title="错误描述"></a>错误描述</h4><p>使用 python 运行如下程序，执行失败</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line">input_values = [1, 2, 3, 4, 5]</span><br><span class="line">squares = [1, 4, 9, 16, 25]</span><br><span class="line"></span><br><span class="line"># 设置图标标题，并给坐标轴加上标签</span><br><span class="line">plt.plot(input_values,squares,linewidth=5)</span><br><span class="line"></span><br><span class="line">plt.title(&quot;Square Numbers&quot;,fontsize=24)</span><br><span class="line">plt.xlabel(&quot;Value&quot;,fontsize=14)</span><br><span class="line">plt.ylabel(&quot;Square of Value&quot;,fontsize=14)</span><br><span class="line"></span><br><span class="line"># 设置刻度标记的大小</span><br><span class="line">plt.tick_params(axis=&apos;both&apos;,labelsize=14)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<h4 id="错误详情"><a href="#错误详情" class="headerlink" title="错误详情"></a>错误详情</h4><blockquote>
<p>ImportError: Python is not installed as a framework. The Mac OS X backend will not be able to function correctly if Python is not installed as a framework. See the Python documentation for more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or try one of the other backends. If you are using (Ana)Conda please install python.app and replace the use of ‘python’ with ‘pythonw’. See ‘Working with Matplotlib on OSX’ in the Matplotlib FAQ for more information.</p>
</blockquote>
<h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><ol>
<li>进入 matplotlib 配置文件目录: <code>~/.matplotlib/</code></li>
<li>新建文件: <code>matplotlibrc</code>，并写入 <code>backend: TkAgg</code></li>
</ol>
<h2 id="2-macOS-MOjave-运行-pygame-没有图像显示"><a href="#2-macOS-MOjave-运行-pygame-没有图像显示" class="headerlink" title="2 macOS MOjave 运行 pygame 没有图像显示"></a>2 macOS MOjave 运行 pygame 没有图像显示</h2><h4 id="错误描述-1"><a href="#错误描述-1" class="headerlink" title="错误描述"></a>错误描述</h4><p>参考<a href="https://www.jianshu.com/p/d4f49767191e" target="_blank" rel="noopener">简书上的 pygame 安装说明</a> 安装完 pygame 开发环境后，验证官方 demo，游戏界面窗口为空白；</p>
<p>官方 demo 检验代码：<code>python -m pygame.examples.aliens</code></p>
<h4 id="错误原因"><a href="#错误原因" class="headerlink" title="错误原因"></a>错误原因</h4><p>PyGame 与 macOS Mojave 版本不兼容；</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>1 系统降级（不推荐~ 太麻烦了）<br>2 安装 Miniconda 虚拟环境, 详细解决步骤参见参考链接 1</p>
<h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p>1 <a href="https://blog.csdn.net/qq_24909089/article/details/83542526" target="_blank" rel="noopener">Python mac运行pygame一片空白不显示内容-解决方案</a><br>2 <a href="https://www.jianshu.com/p/7299c2d4d170" target="_blank" rel="noopener">Miniconda快速入门</a><br>3 <a href="https://github.com/pygame/pygame/issues/555" target="_blank" rel="noopener">pygame Github issues</a><br>4 <a href="https://stackoverflow.com/questions/52718921/problems-getting-pygame-to-show-anything-but-a-blank-screen-on-macos-mojave" target="_blank" rel="noopener">stackoverflow 上的讨论</a><br>5 <a href="https://conda.io/miniconda.html" target="_blank" rel="noopener">Miniconda 官网</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lintrip.com/2018/11/06/httpclient-basic-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KevinG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞翔的花狸猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/06/httpclient-basic-usage/" itemprop="url">
                  HttpClient 基本用法示例
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-06 16:15:41 / 修改时间：16:19:11" itemprop="dateCreated datePublished" datetime="2018-11-06T16:15:41+08:00">2018-11-06</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>主要参考了 Baeldung 的 <a href="https://www.baeldung.com/httpclient4" target="_blank" rel="noopener">HttpClient 4 Cookbook</a></p>
</blockquote>
<h4 id="创建-HttpClient"><a href="#创建-HttpClient" class="headerlink" title="创建 HttpClient"></a>创建 <code>HttpClient</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient httpClient = HttpClientBuilder.create().build();</span><br></pre></td></tr></table></figure>
<h4 id="发送-GET-请求"><a href="#发送-GET-请求" class="headerlink" title="发送 GET 请求"></a>发送 <code>GET</code> 请求</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br></pre></td></tr></table></figure>
<h4 id="获取-HTTP-Response-的状态码"><a href="#获取-HTTP-Response-的状态码" class="headerlink" title="获取 HTTP Response 的状态码"></a>获取 <code>HTTP Response</code> 的状态码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br><span class="line">Assert.assertEquals(HttpStatus.SC_OK, response.getStatusLine().getStatusCode());</span><br></pre></td></tr></table></figure>
<h4 id="获取-HTTP-Response-的-Media-Type"><a href="#获取-HTTP-Response-的-Media-Type" class="headerlink" title="获取 HTTP Response 的 Media Type"></a>获取 <code>HTTP Response</code> 的 <code>Media Type</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br><span class="line">String contentMimeType = ContentType.getOrDefault(response.getEntity()).getMimeType();</span><br><span class="line">Assert.assertEquals(ContentType.TEXT_HTML.getMimeType(), contentMimeType);</span><br></pre></td></tr></table></figure>
<h4 id="获取-HTTP-Response-的内容"><a href="#获取-HTTP-Response-的内容" class="headerlink" title="获取 HTTP Response 的内容"></a>获取 <code>HTTP Response</code> 的内容</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br><span class="line">String bodyAsString = EntityUtils.toString(response.getEntity());</span><br><span class="line">Assert.assertNotNull(bodyAsString);</span><br></pre></td></tr></table></figure>
<h4 id="获取-HTTP-Response-响应头部信息"><a href="#获取-HTTP-Response-响应头部信息" class="headerlink" title="获取 HTTP Response 响应头部信息"></a>获取 <code>HTTP Response</code> 响应头部信息</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient httpClient = HttpClientBuilder.create().build();</span><br><span class="line">HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"http://localhost:8080/hello"</span>);</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br><span class="line">Header[] headers = response.getHeaders(HttpHeaders.CONTENT_TYPE);</span><br><span class="line">Assert.assertNotSame(<span class="number">0</span>,headers.length);</span><br></pre></td></tr></table></figure>
<h4 id="设置请求的超时时间"><a href="#设置请求的超时时间" class="headerlink" title="设置请求的超时时间"></a>设置请求的超时时间</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">RequestConfig requestConfig = RequestConfig.custom()</span><br><span class="line">        .setConnectionRequestTimeout(<span class="number">1000</span>)</span><br><span class="line">        .setConnectTimeout(<span class="number">1000</span>)</span><br><span class="line">        .setSocketTimeout(<span class="number">1000</span>).build();</span><br><span class="line">httpGet.setConfig(requestConfig);</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br></pre></td></tr></table></figure>
<h4 id="设置-HttpClient-的超时时间"><a href="#设置-HttpClient-的超时时间" class="headerlink" title="设置 HttpClient 的超时时间"></a>设置 <code>HttpClient</code> 的超时时间</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RequestConfig requestConfig = RequestConfig.custom()</span><br><span class="line">                .setConnectionRequestTimeout(<span class="number">1000</span>)</span><br><span class="line">                .setConnectTimeout(<span class="number">1000</span>)</span><br><span class="line">                .setSocketTimeout(<span class="number">1000</span>).build();</span><br><span class="line">CloseableHttpClient httpClient = HttpClientBuilder.create().setDefaultRequestConfig(requestConfig).build();</span><br><span class="line">HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br></pre></td></tr></table></figure>
<h4 id="设置请求头"><a href="#设置请求头" class="headerlink" title="设置请求头"></a>设置请求头</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient httpClient = HttpClientBuilder.create().build();</span><br><span class="line">HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">httpGet.addHeader(HttpHeaders.ACCEPT,<span class="string">"application/xml"</span>);</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpGet);</span><br></pre></td></tr></table></figure>
<h4 id="发送-POST-请求"><a href="#发送-POST-请求" class="headerlink" title="发送 POST 请求"></a>发送 <code>POST</code> 请求</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient httpClient = HttpClientBuilder.create().build();</span><br><span class="line">HttpPost httpPost = <span class="keyword">new</span> HttpPost(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpPost);</span><br></pre></td></tr></table></figure>
<h4 id="模拟表单提交的POST请求"><a href="#模拟表单提交的POST请求" class="headerlink" title="模拟表单提交的POST请求"></a>模拟表单提交的<code>POST</code>请求</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient httpClient = HttpClientBuilder.create().build();</span><br><span class="line">List&lt;NameValuePair&gt; parameters = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">parameters.add(<span class="keyword">new</span> BasicNameValuePair(<span class="string">"key1"</span>,<span class="string">"value1"</span>));</span><br><span class="line">parameters.add(<span class="keyword">new</span> BasicNameValuePair(<span class="string">"key2"</span>,<span class="string">"value2"</span>));</span><br><span class="line">HttpPost httpPost = <span class="keyword">new</span> HttpPost(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">httpPost.setEntity(<span class="keyword">new</span> UrlEncodedFormEntity(parameters,Consts.UTF_8));</span><br><span class="line">CloseableHttpResponse response = httpClient.execute(httpPost);</span><br></pre></td></tr></table></figure>
<h4 id="处理HTTP-重定向"><a href="#处理HTTP-重定向" class="headerlink" title="处理HTTP 重定向"></a>处理<code>HTTP</code> 重定向</h4><blockquote>
<p><code>HttpClient</code> 默认策略会处理重定向请求，使用 <code>disableRedirectHandling()</code> 可以禁用重定向处理策略；</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient instance = HttpClientBuilder.create().disableRedirectHandling().build();</span><br><span class="line">CloseableHttpResponse response = instance.execute(<span class="keyword">new</span> HttpGet(<span class="string">"https://dwz.cn/IKeCGtaO"</span>));</span><br><span class="line">Assert.assertEquals(HttpStatus.SC_MOVED_TEMPORARILY,response.getStatusLine().getStatusCode());</span><br></pre></td></tr></table></figure>
<h4 id="关闭-释放资源"><a href="#关闭-释放资源" class="headerlink" title="关闭/释放资源"></a>关闭/释放资源</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">CloseableHttpClient httpClient = <span class="keyword">null</span>;</span><br><span class="line">CloseableHttpResponse response = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    httpClient = HttpClientBuilder.create().build();</span><br><span class="line">    HttpGet httpGet = <span class="keyword">new</span> HttpGet(<span class="string">"http://www.baidu.com"</span>);</span><br><span class="line">    response = httpClient.execute(httpGet);</span><br><span class="line">    Assert.assertEquals(HttpStatus.SC_OK, response.getStatusLine().getStatusCode());</span><br><span class="line">    HttpEntity httpEntity = response.getEntity();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">null</span> != httpEntity) &#123;</span><br><span class="line">        InputStream inputStream = httpEntity.getContent();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    response.close();</span><br><span class="line">    HttpClientUtils.closeQuietly(httpClient);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h4><p>码云链接：<a href="https://gitee.com/maolv/java_code_example/tree/master/httpclient" target="_blank" rel="noopener">httpClient 代码示例</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lintrip.com/2018/11/01/shell-cmd-unzip/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KevinG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞翔的花狸猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/01/shell-cmd-unzip/" itemprop="url">
                  Shell 命令之 unzip
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-11-01 17:59:50 / 修改时间：18:01:42" itemprop="dateCreated datePublished" datetime="2018-11-01T17:59:50+08:00">2018-11-01</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="解压到当前目录"><a href="#解压到当前目录" class="headerlink" title="解压到当前目录"></a>解压到当前目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果文件已存在，会提示是否替换，可以使用 -o 或 -n 参数简化交互；</span><br><span class="line">$unzip test.zip</span><br></pre></td></tr></table></figure>
<h3 id="解压到指定目录"><a href="#解压到指定目录" class="headerlink" title="解压到指定目录"></a>解压到指定目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 解压后的文件路径:/&#123;targetPath&#125;/test</span><br><span class="line">$unzip -d &#123;targetPath&#125; test.zip</span><br></pre></td></tr></table></figure>
<h3 id="不覆盖已经存在的文件"><a href="#不覆盖已经存在的文件" class="headerlink" title="不覆盖已经存在的文件"></a>不覆盖已经存在的文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$unzip -n test.zip</span><br></pre></td></tr></table></figure>
<h3 id="强制覆盖已经存在的文件"><a href="#强制覆盖已经存在的文件" class="headerlink" title="强制覆盖已经存在的文件"></a>强制覆盖已经存在的文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$unzip -o test.zip</span><br></pre></td></tr></table></figure>
<h3 id="查看压缩包中的文件列表"><a href="#查看压缩包中的文件列表" class="headerlink" title="查看压缩包中的文件列表"></a>查看压缩包中的文件列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 文件大小、时间、文件名称</span><br><span class="line">$unzip -l test.zip</span><br></pre></td></tr></table></figure>
<h3 id="查看压缩包中的文件信息【更详细】"><a href="#查看压缩包中的文件信息【更详细】" class="headerlink" title="查看压缩包中的文件信息【更详细】"></a>查看压缩包中的文件信息【更详细】</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 文件大小、压缩比、日期、文件名称</span><br><span class="line">$unzip -v test.zip</span><br></pre></td></tr></table></figure>
<h3 id="检查压缩包是否损坏"><a href="#检查压缩包是否损坏" class="headerlink" title="检查压缩包是否损坏"></a>检查压缩包是否损坏</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$unzip -t test.zip</span><br></pre></td></tr></table></figure>
<h3 id="显示压缩文件的备注"><a href="#显示压缩文件的备注" class="headerlink" title="显示压缩文件的备注"></a>显示压缩文件的备注</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$unzip -z test.zip</span><br></pre></td></tr></table></figure>
<h3 id="执行解压不显示任何信息"><a href="#执行解压不显示任何信息" class="headerlink" title="执行解压不显示任何信息"></a>执行解压不显示任何信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$unzip -q test.zip</span><br><span class="line">$unzip -oq test.zip # 静默解压没有任何提示</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lintrip.com/2018/10/24/java-agent-demo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KevinG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞翔的花狸猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/24/java-agent-demo/" itemprop="url">
                  Java Agent 简单示例
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-24 19:55:17 / 修改时间：20:04:32" itemprop="dateCreated datePublished" datetime="2018-10-24T19:55:17+08:00">2018-10-24</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="新建-maven-工程"><a href="#新建-maven-工程" class="headerlink" title="新建 maven 工程"></a>新建 maven 工程</h3><p>执行 maven 命令，新建工程 <code>java_agent_demo</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate</span><br><span class="line">-DgroupId=com.lintrp </span><br><span class="line">-DartifactId=java_agent_demo</span><br><span class="line">-DarchetypeArtifactId=maven-archetype-quickstart </span><br><span class="line">-DinteractiveMode=false</span><br></pre></td></tr></table></figure></p>
<p>修改 pom，添加 <code>maven-assembly-plugin</code> 插件(插件主要用于生成 <code>MANIFEST.MF</code> 文件)；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;executions&gt;</span><br><span class="line">        &lt;execution&gt;</span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">                &lt;goal&gt;attached&lt;/goal&gt;</span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">            &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;descriptorRefs&gt;</span><br><span class="line">                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;</span><br><span class="line">                &lt;/descriptorRefs&gt;</span><br><span class="line">                &lt;archive&gt;</span><br><span class="line">                    &lt;manifestEntries&gt;</span><br><span class="line">                        // Java Agent 方法执行入口</span><br><span class="line">                        &lt;Premain-Class&gt;com.gitee.maolv.java.AgentDemo&lt;/Premain-Class&gt;</span><br><span class="line">                        &lt;Can-Redefine-Classes&gt;true&lt;/Can-Redefine-Classes&gt;</span><br><span class="line">                        &lt;Can-Retransform-Classes&gt;true&lt;/Can-Retransform-Classes&gt;</span><br><span class="line">                    &lt;/manifestEntries&gt;</span><br><span class="line">                &lt;/archive&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/execution&gt;</span><br><span class="line">    &lt;/executions&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>
<h3 id="编写-AgentDemo"><a href="#编写-AgentDemo" class="headerlink" title="编写 AgentDemo"></a>编写 <code>AgentDemo</code></h3><blockquote>
<p>Agent 入口类需要包含以下两个方法中的一个：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Method1 : public static void premain(String featureString, Instrumentation instrumentation) &#123; ... &#125;</span><br><span class="line">Method2 : public static void premain(String featureString) &#123; ... &#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>Method1 的优先级高于 Method2</p>
</blockquote>
<p>编写 <code>Agent</code>代码，示例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Java Agent Demo</span><br><span class="line"> *</span><br><span class="line"> * @author kevinG</span><br><span class="line"> */</span><br><span class="line">public class AgentDemo &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Agent 启动方法【Method1】</span><br><span class="line">     *</span><br><span class="line">     * @param featureString</span><br><span class="line">     * @param instrumentation</span><br><span class="line">     */</span><br><span class="line">    public static void premain(String featureString, Instrumentation instrumentation) &#123;</span><br><span class="line">        System.out.println(&quot;===Step in Agent Method1===&quot;);</span><br><span class="line">        System.out.println(&quot;supportReDefine:&quot; + instrumentation.isRedefineClassesSupported());</span><br><span class="line">        System.out.println(&quot;supportReTransform:&quot; + instrumentation.isRetransformClassesSupported());</span><br><span class="line">        System.out.println(&quot;featureString:&quot; +  featureString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Agent 启动方法【Method2】</span><br><span class="line">     * 启动加载优先级低于 【Method1】premain(String featureString, Instrumentation instrumentation)</span><br><span class="line">     *</span><br><span class="line">     * @param featureString</span><br><span class="line">     */</span><br><span class="line">    public static void premain(String featureString) &#123;</span><br><span class="line">        System.out.println(&quot;===Step in Agent Method2====&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="打包-java-agent-demo"><a href="#打包-java-agent-demo" class="headerlink" title="打包 java_agent_demo"></a>打包 <code>java_agent_demo</code></h3><p>执行 mvn 命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean compile package</span><br></pre></td></tr></table></figure>
<h3 id="使用自定义的-Agent"><a href="#使用自定义的-Agent" class="headerlink" title="使用自定义的 Agent"></a>使用自定义的 Agent</h3><p>首先新建测试类 <code>TestDemoAgent</code></p>
<p>代码示例如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Java Agent Demo 测试类</span><br><span class="line"> *</span><br><span class="line"> * @author kevinG</span><br><span class="line"> */</span><br><span class="line">public class TestDemoAgent &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        System.out.println(&quot;Hello World!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行 <code>main</code> 方法，输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World!</span><br></pre></td></tr></table></figure></p>
<p>修改 <code>main</code> 方法执行配置,在 <code>VM options</code> 中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-javaagent:&#123;workspace&#125;/java_code_example/javaagent_demo/target/javaagent_demo-0.0.1-jar-with-dependencies.jar=Hello</span><br></pre></td></tr></table></figure>
<p>重新运行 <code>main</code> 方法，输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">===Step in Agent Method1===</span><br><span class="line">supportReDefine:true</span><br><span class="line">supportReTransform:true</span><br><span class="line">featureString:Hello</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure></p>
<p><code>Hello</code> 为 <code>VM options</code> 中新增的自定义参数；</p>
<h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><ul>
<li><a href="https://www.jianshu.com/p/3bbfa22ec7f5" target="_blank" rel="noopener">Java字节码1-Agent简单上手</a></li>
<li><a href="https://www.jianshu.com/p/14bcb17b99e0" target="_blank" rel="noopener">maven-assembly-plugin 入门指南</a></li>
</ul>
<p>码云项目链接：<a href="https://gitee.com/maolv/java_code_example/tree/master/javaagent_demo" target="_blank" rel="noopener">https://gitee.com/maolv/java_code_example/tree/master/javaagent_demo</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lintrip.com/2018/10/18/hexo-build-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KevinG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞翔的花狸猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/18/hexo-build-blog/" itemprop="url">
                  Mac 搭建 Hexo 博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-18 14:21:52" itemprop="dateCreated datePublished" datetime="2018-10-18T14:21:52+08:00">2018-10-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-24 20:06:05" itemprop="dateModified" datetime="2018-10-24T20:06:05+08:00">2018-10-24</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="新建-GitPage-项目"><a href="#新建-GitPage-项目" class="headerlink" title="新建 GitPage 项目"></a>新建 GitPage 项目</h3><blockquote>
<p><a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages </a>是面向用户、组织和项目开放的公共静态页面搭建托管服务，可用于搭建个人博客。</p>
</blockquote>
<p>创建新的 Repository，并命名为 kakakeven.github.io</p>
<h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><blockquote>
<p>参考链接：<a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/index.html</a></p>
</blockquote>
<p>验证安装命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ node -v : 验证 node 安装版本</span><br><span class="line">$ npm -v : 验证 npm 安装版本</span><br><span class="line">$ hexo -v : 验证 hexo 安装版本</span><br></pre></td></tr></table></figure>
<p>Hexo 安装命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<h3 id="初始化-Blog"><a href="#初始化-Blog" class="headerlink" title="初始化 Blog"></a>初始化 Blog</h3><p>安装 Hexo 完成后，执行下列命令，会在指定文件夹中新建所需要的文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt; </span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<p>执行下列命令，可以查看在本地预览；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g // 生成静态页面</span><br><span class="line">$ hexo s // 启动本地 blog 服务器</span><br></pre></td></tr></table></figure></p>
<p>打开浏览器，在地址栏输入 localhost:4000，就可以查看本地博客了</p>
<h3 id="同步-Hexo-博客到-Github"><a href="#同步-Hexo-博客到-Github" class="headerlink" title="同步 Hexo 博客到 Github"></a>同步 Hexo 博客到 Github</h3><p>Hexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。部署到 Github Pages，步骤如下：</p>
<p><strong>安装  hexo-deployer-git</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p><strong>修改部署配置</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:kakakeven/kakakeven.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p>
<p><strong>执行部署</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d // 将本地博客发布到 github</span><br></pre></td></tr></table></figure>
<h3 id="Next-主题配置"><a href="#Next-主题配置" class="headerlink" title="Next 主题配置"></a>Next 主题配置</h3><p><strong>下载主题</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:theme-next/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure>
<p><strong>应用主题</strong></p>
<p>修改 _config.yml，将主题设置为 next</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure>
<h3 id="域名设置"><a href="#域名设置" class="headerlink" title="域名设置"></a>域名设置</h3><p><strong>设置域名</strong></p>
<p>1 切换到个人博客 repository [<a href="https://github.com/kakakeven/kakakeven.github.io]" target="_blank" rel="noopener">https://github.com/kakakeven/kakakeven.github.io]</a><br>2 点击 Setting，进入项目设置页面<br>3 在 Custom domain 下，新增域名配置，并点击保存；</p>
<p>参考链接：<br><a href="https://help.github.com/articles/adding-or-removing-a-custom-domain-for-your-github-pages-site/" target="_blank" rel="noopener">Adding or removing a custom domain for your GitHub Pages site</a></p>
<p><strong>存在的问题</strong></p>
<p>通过 Setting 添加的 CNAME 文件，每次执行 hexo deploy 的时候都会消失</p>
<p><strong>解决方案</strong></p>
<p><em>安装 hexo-generator-cname</em> </p>
<p>1 安装插件： npm install hexo-generator-cname –save<br>2 启用插件：修改 _config.yml，配置 plugins:<br>plugins:<br>  hexo-generator-cname<br>3 配置 CNAME： 修改 _config.yml，配置 url: <a href="http://lintrp.com" target="_blank" rel="noopener">http://lintrp.com</a></p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a href="https://www.cnblogs.com/chengxs/p/7496265.html" target="_blank" rel="noopener">避免 CNAME 的覆盖</a></li>
<li><a href="https://madongqiang2201.github.io/2016/07/21/Mac%E4%B8%8BHexo%EF%BC%8Bgithub-pages%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">推荐：Mac搭建Hexo博客及NexT主题配置优化</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lintrip.com/2018/10/18/design-pattern-singleton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="KevinG">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞翔的花狸猫">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/18/design-pattern-singleton/" itemprop="url">
                  设计模式之单例模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-18 13:35:08" itemprop="dateCreated datePublished" datetime="2018-10-18T13:35:08+08:00">2018-10-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-10-25 16:10:17" itemprop="dateModified" datetime="2018-10-25T16:10:17+08:00">2018-10-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是单例模式？"><a href="#什么是单例模式？" class="headerlink" title="什么是单例模式？"></a>什么是单例模式？</h2><blockquote>
<p>单例模式，是一种常用的软件设计模式，属于对象创建模式的一种。在应用这个模式时，单例对象的类必须保证只有一个实例存在。  </p>
</blockquote>
<h2 id="单例模式的使用场景？"><a href="#单例模式的使用场景？" class="headerlink" title="单例模式的使用场景？"></a>单例模式的使用场景？</h2><ul>
<li>系统关键组件，需要保证系统中只有一个实例；</li>
<li>类的初始化需要消耗较多的系统资源；</li>
</ul>
<h2 id="如何实现？"><a href="#如何实现？" class="headerlink" title="如何实现？"></a>如何实现？</h2><ul>
<li>私有的构造函数。杜绝外部通过构造方法显式创建类的实例，确保系统中仅有一个实例的存在；</li>
<li>提供单例实例的全局访问点。一般为 <code>Method name</code> 为 <code>getInstance()</code> 的静态方法，返回结果为单例实例；</li>
<li>获取单例实例时，首先判断虚拟机中实例是否已存在，如果有则返回，如果没有则创建；</li>
</ul>
<h2 id="常见写法及分析"><a href="#常见写法及分析" class="headerlink" title="常见写法及分析"></a>常见写法及分析</h2><p>单例模式虽然简单，实现方式却比孔乙己老先生的茴字写法还要多。以下：</p>
<h4 id="饿汉模式"><a href="#饿汉模式" class="headerlink" title="饿汉模式"></a>饿汉模式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 单例（饥饿模式）：静态变量初始化保证线程安全</span><br><span class="line"> */</span><br><span class="line">public final class HungerSingleton &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 私有构造方法，保证不能通过 new 创建新的实例</span><br><span class="line">     */</span><br><span class="line">    private HungerSingleton()&#123;&#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 静态示例变量</span><br><span class="line">     */</span><br><span class="line">    private static final HungerSingleton INSTANCE = new HungerSingleton();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取类的单例实例</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static HungerSingleton getInstance()&#123;</span><br><span class="line">        return INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>饿汉模式是最常用的单例写法，JDK 中的 <code>java.lang.Runtime</code> 就是这样实现的，基于 <code>classloader</code> 机制，这种写法可以避免多线程的同步问题；不过 <code>instance</code> 在类装载的时候就实例化，容易产生垃圾对象，对于基础服务中的非核心模块，不建议使用饿汉模式，而应该使用懒加载的单例写法-“按需创建”。</p>
</blockquote>
<h4 id="Synchronized-版（懒汉式）"><a href="#Synchronized-版（懒汉式）" class="headerlink" title="Synchronized 版（懒汉式）"></a>Synchronized 版（懒汉式）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 同步版本的单例</span><br><span class="line"> * 1 懒加载</span><br><span class="line"> * 2 使用 Synchronized 关键字来实现互斥</span><br><span class="line"> * 3 最常见的懒汉版本</span><br><span class="line"> */</span><br><span class="line">public final class SynchronizedSingleton &#123;</span><br><span class="line">    private static SynchronizedSingleton instance;</span><br><span class="line"></span><br><span class="line">    private SynchronizedSingleton() &#123;</span><br><span class="line">        if (instance != null) &#123;</span><br><span class="line">            throw new IllegalStateException(&quot;单例实例已经初始化&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static synchronized SynchronizedSingleton getInstance() &#123;</span><br><span class="line">        if (instance == null) &#123;</span><br><span class="line">            instance = new SynchronizedSingleton();</span><br><span class="line">        &#125;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>同步版本的单例实现了懒加载，在多线程环境中也可以很好的工作，但是，效率很低，因为多数情况下都不需要同步。双重检查锁版本是对 <code>Synchronized</code> 版本的改进。</p>
</blockquote>
<h4 id="双重检查锁版（懒汉式）"><a href="#双重检查锁版（懒汉式）" class="headerlink" title="双重检查锁版（懒汉式）"></a>双重检查锁版（懒汉式）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 双重检查锁单例</span><br><span class="line"> * 1 懒加载；</span><br><span class="line"> * 2 线程安全（通过锁机制来保证）</span><br><span class="line"> * 相比 Synchronized 的写法会有性能上的提升，主要体现在不会每次获取实例都获取锁（只有在实例没有初始化的情况下，才会获取锁）；</span><br><span class="line"> */</span><br><span class="line">public final class DoubleCheckLockingSingleton &#123;</span><br><span class="line"></span><br><span class="line">    private static volatile DoubleCheckLockingSingleton instance;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 私有构造方法</span><br><span class="line">     */</span><br><span class="line">    private DoubleCheckLockingSingleton()&#123;</span><br><span class="line">        // 判断单例是否已经初始化，来组织反射创建单例</span><br><span class="line">        if (instance != null) &#123;</span><br><span class="line">            throw new IllegalStateException(&quot;单例对象已经初始化&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 单例方法</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static DoubleCheckLockingSingleton getInstance()&#123;</span><br><span class="line">        // 局部变量提升 25% 的性能？存疑 TODO 待考证</span><br><span class="line">        DoubleCheckLockingSingleton result = instance;</span><br><span class="line">        if (result == null) &#123;</span><br><span class="line">            synchronized (DoubleCheckLockingSingleton.class) &#123;</span><br><span class="line">                result = instance;</span><br><span class="line">                if (result == null) &#123;</span><br><span class="line">                    instance = result = new DoubleCheckLockingSingleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这种方式是懒加载常用的写法，在多线程环境中也可以保证单例的正确创建，<code>getInstance</code> 方法执行效率比 <code>Synchronized</code> 版本要高。</p>
</blockquote>
<h4 id="静态内部类版（懒汉式）"><a href="#静态内部类版（懒汉式）" class="headerlink" title="静态内部类版（懒汉式）"></a>静态内部类版（懒汉式）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 静态内部类延迟加载单例</span><br><span class="line"> */</span><br><span class="line">public final class OnDemandHolderSingleton &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 私有构造方法</span><br><span class="line">     */</span><br><span class="line">    private OnDemandHolderSingleton()&#123;&#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 获取单例实例</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static OnDemandHolderSingleton getInstance() &#123;</span><br><span class="line">        return SingletonHolder.instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 静态内部类</span><br><span class="line">     */</span><br><span class="line">    private static class SingletonHolder &#123;</span><br><span class="line">        private static final OnDemandHolderSingleton instance = new OnDemandHolderSingleton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>《Java并发编程实践》中推荐的单例写法，实现相比双重检查锁简单。适用于对静态域的延迟初始化；这种方式同样利用了 <code>classLoader</code>机制来保证 <code>instance</code> 初始化时的线程安全。内部类 <code>SingletonHolder</code> 只有在 <code>OnDemandHolderSingleton.getInstance()</code> 方法调用时，才会执行类加载，进而触发 <code>instance</code> 的创建。</p>
</blockquote>
<h4 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 枚举 : 枚举也是一种单例。</span><br><span class="line"> */</span><br><span class="line">public enum EnumSingleton &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>天生单例；不过这种写法很少见；</p>
</blockquote>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">维基百科-单例模式</a></li>
<li><a href="http://www.runoob.com/design-pattern/singleton-pattern.html" target="_blank" rel="noopener">菜鸟教程-单例模式</a></li>
<li>推荐：<a href="https://github.com/iluwatar/java-design-patterns" target="_blank" rel="noopener">Github-java-design-patterns</a></li>
</ul>
<p>码云项目链接：<a href="https://gitee.com/maolv/java_code_example/tree/master/design_pattern" target="_blank" rel="noopener">https://gitee.com/maolv/java_code_example/tree/master/design_pattern</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/logo.jpg"
                alt="KevinG" />
            
              <p class="site-author-name" itemprop="name">KevinG</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KevinG</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.4.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.2"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.2"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
